仿真是本项目成功的第一步。我们使用 [[Gazebo 仿真]] 配合 [[PX4]] 的 [[SITL (Software-In-The-Loop)]] 架构。

## [[SITL (Software-In-The-Loop)]]

- **定义**: 软件在环仿真。[[PX4]] 固件PC 上作为独立进程运行，它认为自己是在真实的硬件上运行。
    
- **通信**:
    
    1. [[PX4]]-SITL 进程通过 UDP 与 [[Gazebo 仿真]] 通信，获取（模拟的）传感器数据（如 IMU, GPS）。
        
    2. [[PX4]]-SITL 将计算出的电机指令（PWM）发回给 [[Gazebo 仿真]] 来驱动模型。
        
    3. [[MAVSDK]] 通过 `localhost` (本地回环) 连接到 [[PX4]]-SITL 进程，就像连接真实飞控一样。
        

## 仿真环境搭建

1. **模型**: 在 Gazebo 中创建无人机模型（如 Iris）、带 Aruco 码的目标模型、带号牌的车辆模型。
    
2. **世界 (World)**: 构建仿真场景。
    
3. **启动**: 使用 `ros2 launch` 脚本一键启动 Gazebo、PX4 SITL 以及所有 [[ROS 2]] 节点。
    

**返回: [[index]]**